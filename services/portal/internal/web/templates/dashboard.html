{{template "base" .}}

{{define "content"}}
<section class="section">
    <div class="container">
        <h1 class="title is-3">Dashboard</h1>
        <p class="subtitle is-5 has-text-grey">Welcome back, {{.User.Name}}</p>

        <div class="columns">
            <!-- Profile Card -->
            <div class="column is-4">
                <div class="box">
                    <h2 class="title is-5">Profile</h2>
                    <table class="table is-fullwidth is-striped">
                        <tbody>
                            <tr>
                                <th>Email</th>
                                <td>{{.User.Email}}</td>
                            </tr>
                            <tr>
                                <th>Name</th>
                                <td>{{.User.Name}}</td>
                            </tr>
                            <tr>
                                <th>Member since</th>
                                <td>{{.User.CreatedAt.Format "Jan 2, 2006"}}</td>
                            </tr>
                            <tr>
                                <th>Last login</th>
                                <td>{{.User.LastLoginAt.Format "Jan 2, 2006 3:04 PM"}}</td>
                            </tr>
                        </tbody>
                    </table>
                    <a class="button is-danger is-outlined is-fullwidth mt-4" href="/logout">Logout</a>
                </div>
            </div>

            <!-- Active Sessions -->
            <div class="column is-8">
                <div class="box">
                    <h2 class="title is-5">Active Sessions</h2>
                    {{if .Sessions}}
                    <table class="table is-fullwidth is-striped">
                        <thead>
                            <tr>
                                <th>IP Address</th>
                                <th>User Agent</th>
                                <th>Created</th>
                                <th>Expires</th>
                            </tr>
                        </thead>
                        <tbody>
                            {{range .Sessions}}
                            <tr>
                                <td>{{.IPAddress}}</td>
                                <td><span class="is-size-7">{{.UserAgent}}</span></td>
                                <td>{{.CreatedAt.Format "Jan 2, 2006 3:04 PM"}}</td>
                                <td>{{.ExpiresAt.Format "Jan 2, 2006 3:04 PM"}}</td>
                            </tr>
                            {{end}}
                        </tbody>
                    </table>
                    {{else}}
                    <p class="has-text-grey">No active sessions.</p>
                    {{end}}
                </div>
            </div>
        </div>
    </div>
</section>
{{end}}
